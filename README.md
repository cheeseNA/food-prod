# How to deploy

## file needs to be sent

- .streamlit/
- flask/
- Labels/
- locales/
- Models/
- src/
- userdata/
- environment_calculate.py
- imageproc.py
- main.py
- nutrient_calculate.py
- recipielog.py
- record.py
- user_page.py
- utils.py

## packages to be installed

- numpy
- pandas
- streamlit
- flask
- openpyxl
- pillow
- plotly
- scikit-learn
- torch
- torchvision
- tqdm
- transformers
- mod_wsgi
  - You may need to install `apache2-dev` package to install `mod_wsgi`

## Apache configuration

Add below lines to `/var/etc/apache2/sites-available/000-default.conf`

```
LoadModule wsgi_module "/var/www/html/maeda/food/.venv/lib/python3.10/site-packages/mod_wsgi/server/mod_wsgi-py310.cpython-310-x86_64-linux-gnu.so"
WSGIPythonHome "/var/www/html/maeda/food/.venv"

<VirtualHost *:80>
        ...
        WSGIScriptAlias /share /var/www/html/maeda/food/flask/wsgi.py
</VirtualHost>
```

Top two lines can be generated by `mod_wsgi-express module-config` command.

Then restart apache2 service by `systemctl restart apache2.service`.

## Environment variables
- HOST_NAME: host name without port number